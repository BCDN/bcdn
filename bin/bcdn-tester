#!/usr/bin/env coffee

path = require 'path'
pkg = require '../package.json'
version = pkg.version
BCDNPeer = require('..').Peer
opts = require 'optimist'
  .usage 'Usage: $0'
  .options
    trackers:
      demand: false
      alias: 't'
      description: 'tracker hosts'
      default: ['ws://127.0.0.1:9001/']
    key:
      demand: false
      alias: 'k'
      description: 'connection key'
      default: 'bcdn'
  .argv

unless process.env.DEBUG
  process.on 'uncaughtException', (err) ->
    console.error "Error: #{err}"

peer = new BCDNPeer opts, (peer) ->
  console.log "Peer initialzed (v. #{version})"
